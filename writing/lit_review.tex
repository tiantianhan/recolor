%literature review
\section{Related prior work}

Relevant prior work fall into four rough categories. 

There is a large body of work on the subject of automatically transfering the ``style" or specific colours in an example image to another image.

There have also been several prior studies transfering color specifically for images wherein skin colour is prominent. These are most similar in purpose to our project we will discuss each study in detail.

We have also found several examples of practical application of skin transfer algorithms, where different application demonstrate practical uses of usually relatively simple skin transfer algorithm that is part of a larger project; we will discuss several of these projects. 

Finally, there is the related field of skintone enhancement software, where algorithms are usually intended to adjust the user skin colour towards a more pleasing tone and not to a specific target colour. We include the latter because unlike the other categories of prior work there are several studies of adjusting skintone on a mobile device, which is part of the requirements for this project.

\section{Colour transfer by example image for general images}
Colour transfer refers to modifying the colours of an image to give it the desired appearance and style demonstrated by an example image, which we will refer to as the \textit{target image}. Figure \ref{fig:color_transfer} illustrates an example of this effect.

There have been a wide range of studies done in this area beginning with the seminal work of Reinhard et al. in 2001 \cite{reinhard_2001_transfer}. The authors converts the image into $l\alpha\beta$ colour space, a colour space designed for natural scenes and based on research into human perception to reduce the correlation between each channel and remove the need to consider cross-channel effects when performing transformations on each channel. The authors then perform a simple operation to match the average and standard deviation of the values in each channel of the original image to that of the target image. The resultant image is then converted back into $rgb$ space.
%in this paper we replicate this method for comparison purposes?

In a later study, Pitié et al. developed a method for entirely transfering the exact statistical distribution of the colours of the target image to the original image \cite{pitie_2005_pdf}, and later improved on the technique with the motivation of automating film grading, or the process of enhancing frames in films to ensure consistency of colour and ``feel" \cite{pitie_2007_grading}. We show the effects they demonstrate in Table \ref{tab:pitie_demo}

\begin{longtable}{|N||c|c|c|}
    \caption{Screen captures from Photoshop tutorial for matching the skintones of portraits of different people. \label{tab:pitie_demo}}\\
    \hline
    \multicolumn{1}{|c||}{No.} & Original & Target & Result \\
    \hline  \label{row:pitie_demo_1} &
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_original}
  \end{minipage} & 
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_target1}
  \end{minipage} & 
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_result1}
  \end{minipage} \\
    \hline  \label{row:pitie_demo_2} &
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_original}
  \end{minipage} & 
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_target2}
  \end{minipage} & 
  \begin{minipage}{.29\textwidth}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{images/pitie_result2}
  \end{minipage} \\
    \hline
\end{longtable}
%in this paper we replicate this method based on code found online?

More recently, Bonnel et al. conducted a further study on color transfer for film grading considering both spacial and temporal information \cite{bonneel_2013_video} and Chang et al. created a tool for user editing of image based on a automatically generated colour palatte \cite{chang_2015_palette}.

While these techniques are interesting possibilities to try when transfering human skin colour, because the these prior studies are all concerned with different problems that can arise with general images but not specifically for human skin colour, studies that specifically relate to human skin colour demonstrate that the general colour transfer techniques can be improved upon.

\section{Transfer of human skin colour}
Several studies have been done specifically on the transfer of human skin colour.

Seo et al. \cite{seo_2005_transfer} has a purpose closest to the purpose of this project, to transfer human skin colours. The authors show results that improve in realistic appearance compared to the Reinhard's algorithm.

% Models the skin as ellipsoid distribution around vector, with another vector for specular reflection
% Algorithm used - RGB space transform, division into bins and moving standard dev and mean while leaving details intact
% Results don't show range but we can possibly replicate and check?

It is not clear how fast the algorithm can run particularly on a mobile device, nor the range of colours that the algorithm can transform a single skin colour, and it is in these areas that our project will attempt to improve upon.

Yang et al. performed the most recent study of colour transfer for human portraits \cite{yang_2015_semantic}. However, this study focuses on the effect on the whole image, and places emphasis on transfering colour for different features of the human face. The actual algorithm used to transfer skin colour remains Reinhard's algorithm. This method also ranks the preferred target image for similarity to the original image before performing the colour transfer, which differs from our project where a key issue is that we have no control over the target image that the user will provide us. 

Yin et al. performed a study on the transfer of skin colour between races in order to aid a psychological study \cite{yin_2004_transfer}. 

% Study has flaws: quality of transfer - bright spots, realism for transfer from a lighter or midtoned skin colour to darker skin colour, and time taken to perform the transfer

We include this study because it is one of the few that explicitly tries to transfer colour between a large difference of skin colour.

\section{Skin colour transfer as part of other applications}
Several applications performing different functions make use of skin colour transfer.

Shilkrot et al. published a study on transfering identity of the user on to a model image wearing garments the user may desire to purchase to create the virtual experience of the user trying on the garment \cite{shilkrot_2013_garment}. The purpose of this article is fundamentally related to the purpose of the application that is this project's goal to support, and so this article is of great interest to us. 

In fact, as part of the identity transfer, this article performs skin colour transfer on the model image to take on the skin colour of the user. Shilkrot uses a Gaussian Mixed Model for transfer skin colours and seems to use it for a relatively wide range of color differences.
%explain this model
%Is there user interaction?
%timing wise, how fast?
%include figures of results

The difference between Shilkrot's study and ours is that skin is only a small part of their final image, and the skin transfer process is only a small part of their study, which also places emphasis on the transfer of the user's head and the reshaping of the model's body proportions. In our case, the hand will be the only object of interest in our inputs and outputs. While we need not devote our efforts to any aspect but the skin colour change, any flaws in the color transfer causing unrealistic results will be much more noticeable. 
% Are there other identity transfer articles?

Another interesting case of skin colour matching is the work Bitouk et al to create a face swapping software that seamlessly changes faces in photos to stock photo faces \cite{bitouk_2008_faceswap}. Since the skin colour of stock photo face does not exactly match the rest of the skin colour in the original photo, the authors adjust the lighting and skin colour until they do match. In their case however, the author specifically state large skin colour changes cannot be made, and to support a wide range of skin colours, the authors rely on having a large library of stock photos of every lighting position and skin colour. On the other hand, in our case, we are motivated by that fact that it is difficult to prepare videos for the full range of user skin colours.
%but it's fast though, should mention that

Another application we've found is the work Baba et al. to develop a software that edits portraits in yearbook photos to all have a uniform skin colour given an example skin colour image \cite{baba_2015_yearbook}. The algorithm that the authors use to acheive this uses Pitié's colour grading algorithm and guided image filtering. However, the goal of the project in terms of skin colour appears to be to have skin colours close to the target image but not necessarily exactly the same; the authors are focusing on the overall appearance of the set of portraits rather than the accuracy of the skin colour transfer for each individual image. On the other hand, the goal of our project is to ensure that the transformed skin colour of the model is as accurate as possible to the user's skin colour.
%explain guided image filtering

\section{Skin colour enhancement mobile applications}
For the most part the studies we have found are not meant to be run on a mobile platform and there are few specifically devoted to human skin colour. There are however many skin colour enhancement applications that modify human skin colour and several studies that perform this on mobile devices. 
%This makes sense as mobile devices all have cameras and these days skin tone enhancement is part of the functionality of the camera
%exceptions though - which algorithms are fast? garment,
%are you sure there are no other skin color change stuff on mobile platform? look more into this
%Mention the 2 studies at least
The difference between those studies and ours is that we have a target colour that could be very different from the colour that skin enhancement is aiming for, and our requirements for accuracy to the target colour is more stringent.

\section{Summary of differences between prior studies and this project}
In summary, prior work typically cannot satisfy all of our requirements for this project, which include:

\textbf{Realistic skin colour transfer}. In the case of general image color transfer algorithms, though there is a large number of very sophisticated prior work, most of the effort in that field has been to ensure that the process can cope with a wide range of images. Our project only focuses on a very specific type of image and is very sensitive to the realistic appearance of the skin colour of the processed image.

\textbf{Accuracy of colour transfer}


 use of a target image, , speed of the colour transfer on a mobile device, range of colour transfer
%explain theoretical concepts in context of thesis work; be clear and concise
%summarize relevant research to give understanding of current field
%analyze research in field to give deeper understanding of research question 
%indicate a path going forward

\input{lit_review_photoshop}
